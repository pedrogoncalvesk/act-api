version: 2.1

orbs:
  heroku: circleci/heroku@1.2.6

workflows:
  dev-heroku-deploy:
    jobs:
      - heroku/deploy-via-git:
          filters:
            branches:
              only:
                - develop
          api-key: HEROKU_API_KEY
          app-name: actedu-act-api-dev
  hml-heroku-deploy:
    jobs:
      - heroku/deploy-via-git:
          filters:
            branches:
              only:
                - /^release.*/
          api-key: HEROKU_API_KEY
          app-name: actedu-act-api-hml
  heroku-deploy:
    jobs:
      - heroku/deploy-via-git:
          filters:
            branches:
              only:
                - main
            tags:
              only: /^v[0-9]+(\.[0-9]+)*$/
          api-key: HEROKU_API_KEY
          app-name: actedu-act-api
